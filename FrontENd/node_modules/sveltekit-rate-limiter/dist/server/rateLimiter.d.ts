import { CookieRateLimiter, type CookieRateLimiterOptions } from './limiters/cookieRateLimiter.js';
import type { MaybePromise, RequestEvent } from '@sveltejs/kit';
import { type HashFunction } from './hashFunction.js';
import { type RateLimiterPlugin } from './limiters/rateLimiterPlugin.js';
import { type Rate } from './rate.js';
import type { RateLimiterStore } from './stores/rateLimiterStore.js';
export type RateLimiterOptions = Partial<{
    plugins: RateLimiterPlugin[];
    store: RateLimiterStore;
    maxItems: number;
    onLimited: (event: RequestEvent, reason: 'rate' | 'rejected') => MaybePromise<void | boolean>;
    /**
     * @deprecated Add the IP/IPUA/cookie rates to the main object, no need for "rates".
     */
    rates: {
        /**
         * @deprecated Add the IP option to the main object, no need for "rates".
         */
        IP?: Rate;
        /**
         * @deprecated Add the IPUA option to the main object, no need for "rates".
         */
        IPUA?: Rate;
        /**
         * @deprecated Add cookie option to the main object, no need for "rates".
         */
        cookie?: CookieRateLimiterOptions;
    };
    IP: Rate | Rate[];
    IPUA: Rate | Rate[];
    cookie: CookieRateLimiterOptions;
    hashFunction: HashFunction;
}>;
export declare class RateLimiter<Extra = never> {
    private readonly store;
    private readonly plugins;
    private readonly onLimited;
    private readonly hashFunction;
    readonly cookieLimiter: CookieRateLimiter | undefined;
    /**
     * Check if a request event is rate limited.
     * @param {RequestEvent} event
     * @returns {Promise<boolean>} true if request is limited, false otherwise
     */
    isLimited(event: [Extra] extends [never] ? RequestEvent : {
        missing_extraData: Extra;
    }): Promise<boolean>;
    /**
     * Check if a request event is rate limited, supplying extra data that will be available for plugins.
     * @param {RequestEvent} event
     * @returns {Promise<boolean>} true if request is limited, false otherwise
     */
    isLimited(event: RequestEvent, extraData: Extra): Promise<boolean>;
    /**
     * Clear all rate limits.
     */
    clear(): Promise<void>;
    /**
     * Check if a request event is rate limited.
     * @param {RequestEvent} event
     * @returns {Promise<boolean>} true if request is limited, false otherwise
     */
    protected _isLimited(event: RequestEvent, extraData: Extra): Promise<{
        limited: boolean;
        hash: string | null;
        ttl: number;
    }>;
    constructor(options?: RateLimiterOptions);
}
