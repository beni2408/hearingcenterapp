import TTLCache from '@isaacs/ttlcache';
export class TTLStore {
    cache;
    constructor(maxTTL, maxItems = Infinity) {
        this.cache = new TTLCache({
            ttl: maxTTL,
            max: maxItems,
            noUpdateTTL: true
        });
    }
    async clear() {
        return this.cache.clear();
    }
    async add(hash, ttl) {
        const currentRate = this.cache.get(hash) ?? 0;
        return this.set(hash, currentRate + 1, ttl);
    }
    set(hash, rate, ttl) {
        this.cache.set(hash, rate, { ttl });
        return rate;
    }
}
